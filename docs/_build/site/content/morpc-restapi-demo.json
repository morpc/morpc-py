{"version":2,"kind":"Notebook","sha256":"a14e6b91a2696a981e95a2917d832a343fceb9c3d7056897523251a0d30188ff","slug":"morpc-restapi-demo","location":"/morpc-restapi-demo.ipynb","dependencies":[],"frontmatter":{"title":"MORPC ArcGIS REST API Tools","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"github":"https://github.com/morpc/morpc-py","exports":[{"format":"ipynb","filename":"morpc-restapi-demo.ipynb","url":"/morpc-restapi-demo-1407f4ec32238f3159a560f3d610ec3a.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Introduction","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NAezlW8iFn"}],"identifier":"introduction","label":"Introduction","html_id":"introduction","implicit":true,"key":"Vy2M5Yw4lO"}],"key":"dP8bcyn417"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Many spatial data sets are stored in ArcGIS online and are available through the REST API. This set of scripts uses the frictionless framework to document and download data. It reads available metadata and iteratively downloads the data in GeoJSON format and returns a GDF, and optionally archives the file.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qidvhern63"}],"key":"I3SO89q4g2"}],"key":"oOkEBF3d3i"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import morpc","key":"atXJAPTCDs"},{"type":"output","id":"3_XzhUPqStv_S1euB23Kq","data":[],"key":"tyz2MEeJbM"}],"key":"W4B2NnDfSM"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Creating a resource file","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vvcqpJaqte"}],"identifier":"creating-a-resource-file","label":"Creating a resource file","html_id":"creating-a-resource-file","implicit":true,"key":"mHzjJJStwP"}],"key":"KcDGWAsSLk"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"test_url = 'https://tigerweb.geo.census.gov/arcgis/rest/services/TIGERweb/CBSA/MapServer/3'","key":"Ljeu5xkCsj"},{"type":"output","id":"DCwyiYjKRdM_IfdiJGLqR","data":[],"key":"YCvS2KmVDY"}],"key":"cBJMJjuBvQ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"resource = morpc.rest_api.resource_from_services_url(test_url)\nresource","key":"bCfjHGCAMo"},{"type":"output","id":"yLwCI9VkNorKkf5aQxV00","data":[{"output_type":"execute_result","execution_count":3,"metadata":{},"data":{"text/plain":{"content":"{'name': 'metropolitan-statistical-areas',\n 'type': 'json',\n 'path': 'https://tigerweb.geo.census.gov/arcgis/rest/services/TIGERweb/CBSA/MapServer/3',\n 'scheme': 'https',\n 'format': 'json',\n 'mediatype': 'application/geo+json',\n 'schema': {'fields': [{'name': 'MTFCC', 'type': 'string', 'title': 'MTFCC'},\n                       {'name': 'OID', 'type': 'string', 'title': 'OID'},\n                       {'name': 'GEOID', 'type': 'string', 'title': 'GEOID'},\n                       {'name': 'CBSA', 'type': 'string', 'title': 'CBSA'},\n                       {'name': 'BASENAME',\n                        'type': 'string',\n                        'title': 'BASENAME'},\n                       {'name': 'NAME', 'type': 'string', 'title': 'NAME'},\n                       {'name': 'LSADC', 'type': 'string', 'title': 'LSADC'},\n                       {'name': 'FUNCSTAT',\n                        'type': 'string',\n                        'title': 'FUNCSTAT'},\n                       {'name': 'AREALAND',\n                        'type': 'string',\n                        'title': 'AREALAND'},\n                       {'name': 'AREAWATER',\n                        'type': 'string',\n                        'title': 'AREAWATER'},\n                       {'name': 'CSA', 'type': 'string', 'title': 'CSA'},\n                       {'name': 'CENTLAT',\n                        'type': 'string',\n                        'title': 'CENTLAT'},\n                       {'name': 'CENTLON',\n                        'type': 'string',\n                        'title': 'CENTLON'},\n                       {'name': 'INTPTLAT',\n                        'type': 'string',\n                        'title': 'INTPTLAT'},\n                       {'name': 'INTPTLON',\n                        'type': 'string',\n                        'title': 'INTPTLON'},\n                       {'name': 'OBJECTID',\n                        'type': 'string',\n                        'title': 'OBJECTID'}]},\n '_metadata': {'type': 'arcgis_service',\n               'total_records': 393,\n               'max_record_count': 100000}}","content_type":"text/plain"}}}],"key":"sTPD7MIS2F"}],"key":"oZhYnFpJAn"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"resource.to_json('../docs/temp_data/rest_resource.json')","key":"RqLKQYYKd1"},{"type":"output","id":"r0S7rsBmDmzdJo63h5LwW","data":[{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/plain":{"content":"'{\\n  \"name\": \"metropolitan-statistical-areas\",\\n  \"type\": \"json\",\\n  \"path\": \"https://tigerweb.geo.census.gov/arcgis/rest/services/TIGERweb/CBSA/MapServer/3\",\\n  \"scheme\": \"https\",\\n  \"format\": \"json\",\\n  \"mediatype\": \"application/geo+json\",\\n  \"schema\": {\\n    \"fields\": [\\n      {\\n        \"name\": \"MTFCC\",\\n        \"type\": \"string\",\\n        \"title\": \"MTFCC\"\\n      },\\n      {\\n        \"name\": \"OID\",\\n        \"type\": \"string\",\\n        \"title\": \"OID\"\\n      },\\n      {\\n        \"name\": \"GEOID\",\\n        \"type\": \"string\",\\n        \"title\": \"GEOID\"\\n      },\\n      {\\n        \"name\": \"CBSA\",\\n        \"type\": \"string\",\\n        \"title\": \"CBSA\"\\n      },\\n      {\\n        \"name\": \"BASENAME\",\\n        \"type\": \"string\",\\n        \"title\": \"BASENAME\"\\n      },\\n      {\\n        \"name\": \"NAME\",\\n        \"type\": \"string\",\\n        \"title\": \"NAME\"\\n      },\\n      {\\n        \"name\": \"LSADC\",\\n        \"type\": \"string\",\\n        \"title\": \"LSADC\"\\n      },\\n      {\\n        \"name\": \"FUNCSTAT\",\\n        \"type\": \"string\",\\n        \"title\": \"FUNCSTAT\"\\n      },\\n      {\\n        \"name\": \"AREALAND\",\\n        \"type\": \"string\",\\n        \"title\": \"AREALAND\"\\n      },\\n      {\\n        \"name\": \"AREAWATER\",\\n        \"type\": \"string\",\\n        \"title\": \"AREAWATER\"\\n      },\\n      {\\n        \"name\": \"CSA\",\\n        \"type\": \"string\",\\n        \"title\": \"CSA\"\\n      },\\n      {\\n        \"name\": \"CENTLAT\",\\n        \"type\": \"string\",\\n        \"title\": \"CENTLAT\"\\n      },\\n      {\\n        \"name\": \"CENTLON\",\\n        \"type\": \"string\",\\n        \"title\": \"CENTLON\"\\n      },\\n      {\\n        \"name\": \"INTPTLAT\",\\n        \"type\": \"string\",\\n        \"title\": \"INTPTLAT\"\\n      },\\n      {\\n        \"name\": \"INTPTLON\",\\n        \"type\": \"string\",\\n        \"title\": \"INTPTLON\"\\n      },\\n      {\\n        \"name\": \"OBJECTID\",\\n        \"type\": \"string\",\\n        \"title\": \"OBJECTID\"\\n      }\\n    ]\\n  },\\n  \"_metadata\": {\\n    \"type\": \"arcgis_service\",\\n    \"total_records\": 393,\\n    \"max_record_count\": 100000\\n  }\\n}'","content_type":"text/plain"}}}],"key":"f9pnyIanDY"}],"key":"FNx2FXP6g1"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"key = morpc.rest_api.get_api_key('./temp_data/api_key.txt')","key":"V4YJJa3rWJ"},{"type":"output","id":"hFHQGpvyViVLJTegUbMCA","data":[],"key":"dtlE4Jwnlf"}],"key":"OMGY8E0euM"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"f\"{resource.path}/query?outFields=*&where=1%3D1&f=geojson&key={key}\"","key":"MJFLJQHkT0"},{"type":"output","id":"FvdjuUvuY-OZRjA5mqIzu","data":[{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"text/plain":{"content":"'https://tigerweb.geo.census.gov/arcgis/rest/services/TIGERweb/CBSA/MapServer/3/query?outFields=*&where=1%3D1&f=geojson&key=83269ff2739cb3bd485c75b091dcee493ad6fe70'","content_type":"text/plain"}}}],"key":"SVPszJKpbC"}],"key":"ViD270vZpd"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"morpc.rest_api.gdf_from_rest_resource('../docs/temp_data/rest_resource.json', api_key=key)","key":"fFJXj5lhQY"},{"type":"output","id":"QRNsfL8uqHMPwsoq3n6M2","data":[],"key":"qNN4Vt77Kx"}],"key":"WniIBBVRAl"}],"key":"sGwVRFVKCy"},"references":{"cite":{"order":[],"data":{}}}}